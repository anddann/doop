apply plugin: 'java'
apply plugin: 'application'

sourceCompatibility = "1.8"
targetCompatibility = "1.8"

project.group = "plast-lab"
project.version = 1.0

mainClassName = 'deepdoop.datalog.Main'

task wrapper(type: Wrapper) {
	gradleVersion = '2.4'
}


def antlrJar = file('lib/antlr-4.5.1-complete.jar')

dependencies {
	compile files(antlrJar)
	runtime files(antlrJar)
}

task runAntlr (type: JavaExec) {
	description "Generate Java source files from antlr grammar"
	group = "Other"
	classpath = sourceSets.main.compileClasspath
	main = 'org.antlr.v4.Tool'
	args = [ "src/main/java/deepdoop/datalog/Datalog.g4" ]
}

compileJava { dependsOn runAntlr }

run {
	if(project.hasProperty("args")) {
		args project.property("args").split()
	}
}
